package com.viplearner.api.services

import com.viplearner.api.client.ApiContext
import com.viplearner.api.client.BaseApiClient
import com.viplearner.api.client.auth.NoAuthProvider
import io.ktor.client.HttpClient
import io.ktor.client.engine.mock.MockEngine
import io.ktor.client.engine.mock.respond
import io.ktor.client.plugins.contentnegotiation.ContentNegotiation
import io.ktor.http.HttpHeaders
import io.ktor.http.HttpMethod
import io.ktor.http.HttpStatusCode
import io.ktor.http.headersOf
import io.ktor.serialization.kotlinx.json.json
import io.ktor.utils.io.ByteReadChannel
import kotlinx.coroutines.test.runTest
import kotlinx.serialization.json.Json
import kotlin.random.Random
import kotlin.test.BeforeTest
import kotlin.test.Test
import kotlin.test.assertEquals
import kotlin.test.assertTrue

/**
 * Generated test file for UsersService
 *
 * This file was automatically generated by the test generator script.
 * It contains tests for all API endpoints in the UsersService service.
 *
 * Tests use MockEngine to simulate HTTP responses and verify requests.
 */
class UsersServiceTest {
    @BeforeTest
    fun setup() {
        // Setup will be customized per test with mock engine
    }

    @Test
    fun testUsersstatus() =
        runTest {
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                [
                            {
                                        "name": "Mary",
                                        "id": "mary"
                            },
                            {
                                        "name": "Ana",
                                        "title": "WNM",
                                        "flair": "food-drink.ginger",
                                        "id": "ana"
                            }
                ]
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: GET api/users/status
                    assertEquals("api/users/status", request.url.encodedPath.trimStart('/'))
                    assertEquals(HttpMethod.parse("GET"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.usersStatus(ids = "mock")

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Add specific field assertions here

            // Cleanup
            testApiClient.close()
        }

    @Test
    fun testPlayer() =
        runTest {
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                {
                            "bullet": [
                                        {
                                                    "id": "pawn2queen4checkmate",
                                                    "username": "pawn2queen4checkmate",
                                                    "perfs": {
                                                                "bullet": {
                                                                            "rating": 3399,
                                                                            "progress": 4
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "thegreencloud",
                                                    "username": "TheGreenCloud",
                                                    "perfs": {
                                                                "bullet": {
                                                                            "rating": 3386,
                                                                            "progress": 16
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "dr_tiger",
                                                    "username": "Dr_Tiger",
                                                    "perfs": {
                                                                "bullet": {
                                                                            "rating": 3313,
                                                                            "progress": 8
                                                                }
                                                    },
                                                    "title": "GM"
                                        },
                                        {
                                                    "id": "ediz_gurel",
                                                    "username": "Ediz_Gurel",
                                                    "perfs": {
                                                                "bullet": {
                                                                            "rating": 3310,
                                                                            "progress": 13
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "online": true
                                        },
                                        {
                                                    "id": "liamputnam2008",
                                                    "username": "LiamPutnam2008",
                                                    "perfs": {
                                                                "bullet": {
                                                                            "rating": 3303,
                                                                            "progress": 57
                                                                }
                                                    },
                                                    "title": "IM"
                                        },
                                        {
                                                    "id": "arkadiy_khromaev",
                                                    "username": "Arkadiy_Khromaev",
                                                    "perfs": {
                                                                "bullet": {
                                                                            "rating": 3268,
                                                                            "progress": -16
                                                                }
                                                    },
                                                    "patron": true
                                        },
                                        {
                                                    "id": "chessplayer202024",
                                                    "username": "chessplayer202024",
                                                    "perfs": {
                                                                "bullet": {
                                                                            "rating": 3268,
                                                                            "progress": 26
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "night-king96",
                                                    "username": "Night-King96",
                                                    "perfs": {
                                                                "bullet": {
                                                                            "rating": 3257,
                                                                            "progress": -21
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "patron": true
                                        },
                                        {
                                                    "id": "chess-art-us",
                                                    "username": "chess-art-us",
                                                    "perfs": {
                                                                "bullet": {
                                                                            "rating": 3242,
                                                                            "progress": 15
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "online": true
                                        },
                                        {
                                                    "id": "mishka_the_great",
                                                    "username": "Mishka_The_Great",
                                                    "perfs": {
                                                                "bullet": {
                                                                            "rating": 3236,
                                                                            "progress": 17
                                                                }
                                                    },
                                                    "title": "IM"
                                        }
                            ],
                            "blitz": [
                                        {
                                                    "id": "cutemouse83",
                                                    "username": "cutemouse83",
                                                    "perfs": {
                                                                "blitz": {
                                                                            "rating": 3014,
                                                                            "progress": 12
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "patron": true,
                                                    "online": true
                                        },
                                        {
                                                    "id": "sportik_shark",
                                                    "username": "Sportik_Shark",
                                                    "perfs": {
                                                                "blitz": {
                                                                            "rating": 3011,
                                                                            "progress": 6
                                                                }
                                                    },
                                                    "title": "IM"
                                        },
                                        {
                                                    "id": "yarebore",
                                                    "username": "Yarebore",
                                                    "perfs": {
                                                                "blitz": {
                                                                            "rating": 2985,
                                                                            "progress": 11
                                                                }
                                                    },
                                                    "title": "GM"
                                        },
                                        {
                                                    "id": "aspiringstar",
                                                    "username": "aspiringstar",
                                                    "perfs": {
                                                                "blitz": {
                                                                            "rating": 2958,
                                                                            "progress": 18
                                                                }
                                                    },
                                                    "title": "GM"
                                        },
                                        {
                                                    "id": "teem1",
                                                    "username": "teem1",
                                                    "perfs": {
                                                                "blitz": {
                                                                            "rating": 2937,
                                                                            "progress": -25
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "invisibleguest2023",
                                                    "username": "InvisibleGuest2023",
                                                    "perfs": {
                                                                "blitz": {
                                                                            "rating": 2928,
                                                                            "progress": 12
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "ilqar_7474",
                                                    "username": "ilqar_7474",
                                                    "perfs": {
                                                                "blitz": {
                                                                            "rating": 2915,
                                                                            "progress": -1
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "doughnut42",
                                                    "username": "doughnut42",
                                                    "perfs": {
                                                                "blitz": {
                                                                            "rating": 2914,
                                                                            "progress": -17
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "xiaochess",
                                                    "username": "xiaochess",
                                                    "perfs": {
                                                                "blitz": {
                                                                            "rating": 2904,
                                                                            "progress": 2
                                                                }
                                                    },
                                                    "title": "GM"
                                        },
                                        {
                                                    "id": "athena-pallada",
                                                    "username": "athena-pallada",
                                                    "perfs": {
                                                                "blitz": {
                                                                            "rating": 2902,
                                                                            "progress": -23
                                                                }
                                                    },
                                                    "title": "GM"
                                        }
                            ],
                            "rapid": [
                                        {
                                                    "id": "yuuki-asuna",
                                                    "username": "yuuki-asuna",
                                                    "perfs": {
                                                                "rapid": {
                                                                            "rating": 2825,
                                                                            "progress": 14
                                                                }
                                                    },
                                                    "title": "CM"
                                        },
                                        {
                                                    "id": "kurald_galain",
                                                    "username": "Kurald_Galain",
                                                    "perfs": {
                                                                "rapid": {
                                                                            "rating": 2803,
                                                                            "progress": 10
                                                                }
                                                    },
                                                    "patron": true
                                        },
                                        {
                                                    "id": "drawdenied_twitch",
                                                    "username": "DrawDenied_Twitch",
                                                    "perfs": {
                                                                "rapid": {
                                                                            "rating": 2796,
                                                                            "progress": -6
                                                                }
                                                    },
                                                    "title": "GM"
                                        },
                                        {
                                                    "id": "ilqar_7474",
                                                    "username": "ilqar_7474",
                                                    "perfs": {
                                                                "rapid": {
                                                                            "rating": 2793,
                                                                            "progress": -65
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "aristarch_kukuev",
                                                    "username": "Aristarch_Kukuev",
                                                    "perfs": {
                                                                "rapid": {
                                                                            "rating": 2777,
                                                                            "progress": 4
                                                                }
                                                    },
                                                    "title": "NM"
                                        },
                                        {
                                                    "id": "mainrival",
                                                    "username": "Mainrival",
                                                    "perfs": {
                                                                "rapid": {
                                                                            "rating": 2775,
                                                                            "progress": 45
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "arteler",
                                                    "username": "Arteler",
                                                    "perfs": {
                                                                "rapid": {
                                                                            "rating": 2771,
                                                                            "progress": 10
                                                                }
                                                    },
                                                    "title": "FM"
                                        },
                                        {
                                                    "id": "chessmem",
                                                    "username": "chessmem",
                                                    "perfs": {
                                                                "rapid": {
                                                                            "rating": 2754,
                                                                            "progress": 8
                                                                }
                                                    },
                                                    "title": "FM"
                                        },
                                        {
                                                    "id": "andrey11976",
                                                    "username": "Andrey11976",
                                                    "perfs": {
                                                                "rapid": {
                                                                            "rating": 2742,
                                                                            "progress": 5
                                                                }
                                                    },
                                                    "title": "NM"
                                        },
                                        {
                                                    "id": "tuzakli_egitim",
                                                    "username": "Tuzakli_Egitim",
                                                    "perfs": {
                                                                "rapid": {
                                                                            "rating": 2740,
                                                                            "progress": 6
                                                                }
                                                    },
                                                    "title": "FM",
                                                    "online": true
                                        }
                            ],
                            "classical": [
                                        {
                                                    "id": "yuuki-asuna",
                                                    "username": "yuuki-asuna",
                                                    "perfs": {
                                                                "classical": {
                                                                            "rating": 2630,
                                                                            "progress": 8
                                                                }
                                                    },
                                                    "title": "CM"
                                        },
                                        {
                                                    "id": "unstoppable_rob",
                                                    "username": "Unstoppable_Rob",
                                                    "perfs": {
                                                                "classical": {
                                                                            "rating": 2514,
                                                                            "progress": 4
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "byebob",
                                                    "username": "byebob",
                                                    "perfs": {
                                                                "classical": {
                                                                            "rating": 2507,
                                                                            "progress": 30
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "chesstheory64",
                                                    "username": "ChessTheory64",
                                                    "perfs": {
                                                                "classical": {
                                                                            "rating": 2504,
                                                                            "progress": 0
                                                                }
                                                    },
                                                    "title": "FM",
                                                    "patron": true
                                        },
                                        {
                                                    "id": "vlad_lazarev79",
                                                    "username": "Vlad_Lazarev79",
                                                    "perfs": {
                                                                "classical": {
                                                                            "rating": 2489,
                                                                            "progress": 4
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "mw1966",
                                                    "username": "MW1966",
                                                    "perfs": {
                                                                "classical": {
                                                                            "rating": 2482,
                                                                            "progress": -1
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "ojaijoao",
                                                    "username": "OjaiJoao",
                                                    "perfs": {
                                                                "classical": {
                                                                            "rating": 2460,
                                                                            "progress": 14
                                                                }
                                                    },
                                                    "title": "FM"
                                        },
                                        {
                                                    "id": "thorwald5",
                                                    "username": "Thorwald5",
                                                    "perfs": {
                                                                "classical": {
                                                                            "rating": 2459,
                                                                            "progress": -2
                                                                }
                                                    },
                                                    "title": "FM"
                                        },
                                        {
                                                    "id": "avcs",
                                                    "username": "avcs",
                                                    "perfs": {
                                                                "classical": {
                                                                            "rating": 2456,
                                                                            "progress": 36
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "uzkuzk",
                                                    "username": "uzkuzk",
                                                    "perfs": {
                                                                "classical": {
                                                                            "rating": 2442,
                                                                            "progress": -29
                                                                }
                                                    }
                                        }
                            ],
                            "ultraBullet": [
                                        {
                                                    "id": "pawn2queen4checkmate",
                                                    "username": "pawn2queen4checkmate",
                                                    "perfs": {
                                                                "ultraBullet": {
                                                                            "rating": 2820,
                                                                            "progress": 15
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "arkadiy_khromaev",
                                                    "username": "Arkadiy_Khromaev",
                                                    "perfs": {
                                                                "ultraBullet": {
                                                                            "rating": 2801,
                                                                            "progress": 4
                                                                }
                                                    },
                                                    "patron": true
                                        },
                                        {
                                                    "id": "sslimey",
                                                    "username": "sslimey",
                                                    "perfs": {
                                                                "ultraBullet": {
                                                                            "rating": 2710,
                                                                            "progress": 28
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "ohanyaneminchess",
                                                    "username": "OhanyanEminChess",
                                                    "perfs": {
                                                                "ultraBullet": {
                                                                            "rating": 2704,
                                                                            "progress": -13
                                                                }
                                                    },
                                                    "title": "GM"
                                        },
                                        {
                                                    "id": "chess-art-us",
                                                    "username": "chess-art-us",
                                                    "perfs": {
                                                                "ultraBullet": {
                                                                            "rating": 2662,
                                                                            "progress": 15
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "online": true
                                        },
                                        {
                                                    "id": "mereseberserknhi",
                                                    "username": "MereseBerserkNhi",
                                                    "perfs": {
                                                                "ultraBullet": {
                                                                            "rating": 2650,
                                                                            "progress": 8
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "bardyk01",
                                                    "username": "Bardyk01",
                                                    "perfs": {
                                                                "ultraBullet": {
                                                                            "rating": 2644,
                                                                            "progress": -12
                                                                }
                                                    },
                                                    "title": "FM"
                                        },
                                        {
                                                    "id": "blazinq",
                                                    "username": "Blazinq",
                                                    "perfs": {
                                                                "ultraBullet": {
                                                                            "rating": 2642,
                                                                            "progress": 26
                                                                }
                                                    },
                                                    "title": "IM"
                                        },
                                        {
                                                    "id": "trojanhorse2009",
                                                    "username": "Trojanhorse2009",
                                                    "perfs": {
                                                                "ultraBullet": {
                                                                            "rating": 2615,
                                                                            "progress": -32
                                                                }
                                                    },
                                                    "title": "IM"
                                        },
                                        {
                                                    "id": "zakharelyashevich",
                                                    "username": "ZakharElyashevich",
                                                    "perfs": {
                                                                "ultraBullet": {
                                                                            "rating": 2591,
                                                                            "progress": 10
                                                                }
                                                    }
                                        }
                            ],
                            "crazyhouse": [
                                        {
                                                    "id": "grxbullet",
                                                    "username": "GRXbullet",
                                                    "perfs": {
                                                                "crazyhouse": {
                                                                            "rating": 2837,
                                                                            "progress": 18
                                                                }
                                                    },
                                                    "patron": true
                                        },
                                        {
                                                    "id": "larso",
                                                    "username": "larso",
                                                    "perfs": {
                                                                "crazyhouse": {
                                                                            "rating": 2753,
                                                                            "progress": 11
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "patron": true
                                        },
                                        {
                                                    "id": "neutralizerr",
                                                    "username": "Neutralizerr",
                                                    "perfs": {
                                                                "crazyhouse": {
                                                                            "rating": 2645,
                                                                            "progress": 17
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "sonogoneli",
                                                    "username": "sonogoneli",
                                                    "perfs": {
                                                                "crazyhouse": {
                                                                            "rating": 2637,
                                                                            "progress": 0
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "turkeysniper",
                                                    "username": "turkeysniper",
                                                    "perfs": {
                                                                "crazyhouse": {
                                                                            "rating": 2617,
                                                                            "progress": 3
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "tobyrizzo",
                                                    "username": "tobyrizzo",
                                                    "perfs": {
                                                                "crazyhouse": {
                                                                            "rating": 2616,
                                                                            "progress": -23
                                                                }
                                                    },
                                                    "title": "NM"
                                        },
                                        {
                                                    "id": "zhigalko_sergei",
                                                    "username": "Zhigalko_Sergei",
                                                    "perfs": {
                                                                "crazyhouse": {
                                                                            "rating": 2616,
                                                                            "progress": 20
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "patron": true
                                        },
                                        {
                                                    "id": "visualdennis",
                                                    "username": "visualdennis",
                                                    "perfs": {
                                                                "crazyhouse": {
                                                                            "rating": 2602,
                                                                            "progress": 16
                                                                }
                                                    },
                                                    "title": "NM",
                                                    "patron": true
                                        },
                                        {
                                                    "id": "crawlingflour",
                                                    "username": "Crawlingflour",
                                                    "perfs": {
                                                                "crazyhouse": {
                                                                            "rating": 2597,
                                                                            "progress": 18
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "crazy_eight",
                                                    "username": "Crazy_Eight",
                                                    "perfs": {
                                                                "crazyhouse": {
                                                                            "rating": 2597,
                                                                            "progress": 15
                                                                }
                                                    },
                                                    "title": "FM",
                                                    "patron": true,
                                                    "online": true
                                        }
                            ],
                            "chess960": [
                                        {
                                                    "id": "pawn2queen4checkmate",
                                                    "username": "pawn2queen4checkmate",
                                                    "perfs": {
                                                                "chess960": {
                                                                            "rating": 2829,
                                                                            "progress": 9
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "zhigalko_sergei",
                                                    "username": "Zhigalko_Sergei",
                                                    "perfs": {
                                                                "chess960": {
                                                                            "rating": 2813,
                                                                            "progress": -2
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "patron": true
                                        },
                                        {
                                                    "id": "chess-art-us",
                                                    "username": "chess-art-us",
                                                    "perfs": {
                                                                "chess960": {
                                                                            "rating": 2786,
                                                                            "progress": 20
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "online": true
                                        },
                                        {
                                                    "id": "arkadiy_khromaev",
                                                    "username": "Arkadiy_Khromaev",
                                                    "perfs": {
                                                                "chess960": {
                                                                            "rating": 2751,
                                                                            "progress": -5
                                                                }
                                                    },
                                                    "patron": true
                                        },
                                        {
                                                    "id": "homayooont",
                                                    "username": "HomayooonT",
                                                    "perfs": {
                                                                "chess960": {
                                                                            "rating": 2652,
                                                                            "progress": -33
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "online": true
                                        },
                                        {
                                                    "id": "pap-g",
                                                    "username": "Pap-G",
                                                    "perfs": {
                                                                "chess960": {
                                                                            "rating": 2627,
                                                                            "progress": 12
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "patron": true
                                        },
                                        {
                                                    "id": "ck-king-2024",
                                                    "username": "CK-king-2024",
                                                    "perfs": {
                                                                "chess960": {
                                                                            "rating": 2614,
                                                                            "progress": 5
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "realdavidnavara",
                                                    "username": "RealDavidNavara",
                                                    "perfs": {
                                                                "chess960": {
                                                                            "rating": 2607,
                                                                            "progress": -14
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "patron": true
                                        },
                                        {
                                                    "id": "ice2breaker",
                                                    "username": "ice2breaker",
                                                    "perfs": {
                                                                "chess960": {
                                                                            "rating": 2567,
                                                                            "progress": -34
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "arhia-alagemand",
                                                    "username": "Arhia-alagemand",
                                                    "perfs": {
                                                                "chess960": {
                                                                            "rating": 2562,
                                                                            "progress": -9
                                                                }
                                                    }
                                        }
                            ],
                            "kingOfTheHill": [
                                        {
                                                    "id": "pawn2queen4checkmate",
                                                    "username": "pawn2queen4checkmate",
                                                    "perfs": {
                                                                "kingOfTheHill": {
                                                                            "rating": 2721,
                                                                            "progress": 35
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "visiontactician",
                                                    "username": "VisionTactician",
                                                    "perfs": {
                                                                "kingOfTheHill": {
                                                                            "rating": 2692,
                                                                            "progress": -28
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "zhigalko_sergei",
                                                    "username": "Zhigalko_Sergei",
                                                    "perfs": {
                                                                "kingOfTheHill": {
                                                                            "rating": 2665,
                                                                            "progress": 17
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "patron": true
                                        },
                                        {
                                                    "id": "homayooont",
                                                    "username": "HomayooonT",
                                                    "perfs": {
                                                                "kingOfTheHill": {
                                                                            "rating": 2664,
                                                                            "progress": 33
                                                                }
                                                    },
                                                    "title": "GM",
                                                    "online": true
                                        },
                                        {
                                                    "id": "trojanhorse2009",
                                                    "username": "Trojanhorse2009",
                                                    "perfs": {
                                                                "kingOfTheHill": {
                                                                            "rating": 2588,
                                                                            "progress": 14
                                                                }
                                                    },
                                                    "title": "IM"
                                        },
                                        {
                                                    "id": "anindianchessplayer",
                                                    "username": "AnIndianChessplayer",
                                                    "perfs": {
                                                                "kingOfTheHill": {
                                                                            "rating": 2543,
                                                                            "progress": 44
                                                                }
                                                    },
                                                    "title": "CM",
                                                    "online": true
                                        },
                                        {
                                                    "id": "yuuki-asuna",
                                                    "username": "yuuki-asuna",
                                                    "perfs": {
                                                                "kingOfTheHill": {
                                                                            "rating": 2538,
                                                                            "progress": 14
                                                                }
                                                    },
                                                    "title": "CM"
                                        },
                                        {
                                                    "id": "bgah",
                                                    "username": "Bgah",
                                                    "perfs": {
                                                                "kingOfTheHill": {
                                                                            "rating": 2532,
                                                                            "progress": 27
                                                                }
                                                    },
                                                    "title": "FM"
                                        },
                                        {
                                                    "id": "bijiy",
                                                    "username": "bijiy",
                                                    "perfs": {
                                                                "kingOfTheHill": {
                                                                            "rating": 2521,
                                                                            "progress": 14
                                                                }
                                                    },
                                                    "title": "FM"
                                        },
                                        {
                                                    "id": "jimakos",
                                                    "username": "jimakos",
                                                    "perfs": {
                                                                "kingOfTheHill": {
                                                                            "rating": 2516,
                                                                            "progress": 20
                                                                }
                                                    },
                                                    "title": "FM"
                                        }
                            ],
                            "threeCheck": [
                                        {
                                                    "id": "pawn2queen4checkmate",
                                                    "username": "pawn2queen4checkmate",
                                                    "perfs": {
                                                                "threeCheck": {
                                                                            "rating": 2725,
                                                                            "progress": -2
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "statham_13",
                                                    "username": "Statham_13",
                                                    "perfs": {
                                                                "threeCheck": {
                                                                            "rating": 2638,
                                                                            "progress": 18
                                                                }
                                                    },
                                                    "title": "FM",
                                                    "online": true
                                        },
                                        {
                                                    "id": "superbamir",
                                                    "username": "SuperbAmir",
                                                    "perfs": {
                                                                "threeCheck": {
                                                                            "rating": 2540,
                                                                            "progress": 8
                                                                }
                                                    },
                                                    "title": "FM"
                                        },
                                        {
                                                    "id": "trojanhorse2009",
                                                    "username": "Trojanhorse2009",
                                                    "perfs": {
                                                                "threeCheck": {
                                                                            "rating": 2502,
                                                                            "progress": 41
                                                                }
                                                    },
                                                    "title": "IM"
                                        },
                                        {
                                                    "id": "aryan_rahimpour_2004",
                                                    "username": "Aryan_Rahimpour_2004",
                                                    "perfs": {
                                                                "threeCheck": {
                                                                            "rating": 2455,
                                                                            "progress": 27
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "yakov25",
                                                    "username": "Yakov25",
                                                    "perfs": {
                                                                "threeCheck": {
                                                                            "rating": 2454,
                                                                            "progress": 34
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "nthsleagueacc",
                                                    "username": "NTHSLeagueAcc",
                                                    "perfs": {
                                                                "threeCheck": {
                                                                            "rating": 2451,
                                                                            "progress": -12
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "skodakylaq",
                                                    "username": "SkodaKylaq",
                                                    "perfs": {
                                                                "threeCheck": {
                                                                            "rating": 2450,
                                                                            "progress": -1
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "tammenpelaaja_72",
                                                    "username": "tammenpelaaja_72",
                                                    "perfs": {
                                                                "threeCheck": {
                                                                            "rating": 2419,
                                                                            "progress": 40
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "vikal00",
                                                    "username": "vikal00",
                                                    "perfs": {
                                                                "threeCheck": {
                                                                            "rating": 2415,
                                                                            "progress": 3
                                                                }
                                                    }
                                        }
                            ],
                            "antichess": [
                                        {
                                                    "id": "devansh2008",
                                                    "username": "devansh2008",
                                                    "perfs": {
                                                                "antichess": {
                                                                            "rating": 2562,
                                                                            "progress": -41
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "pinni7",
                                                    "username": "Pinni7",
                                                    "perfs": {
                                                                "antichess": {
                                                                            "rating": 2529,
                                                                            "progress": 19
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "antichess_valentino",
                                                    "username": "Antichess_Valentino",
                                                    "perfs": {
                                                                "antichess": {
                                                                            "rating": 2509,
                                                                            "progress": -8
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "neverplayfastanti",
                                                    "username": "neverplayfastanti",
                                                    "perfs": {
                                                                "antichess": {
                                                                            "rating": 2497,
                                                                            "progress": -9
                                                                }
                                                    },
                                                    "patron": true
                                        },
                                        {
                                                    "id": "lmaoooooooooooooooo",
                                                    "username": "Lmaoooooooooooooooo",
                                                    "perfs": {
                                                                "antichess": {
                                                                            "rating": 2483,
                                                                            "progress": -2
                                                                }
                                                    },
                                                    "patron": true
                                        },
                                        {
                                                    "id": "pf2000",
                                                    "username": "pf2000",
                                                    "perfs": {
                                                                "antichess": {
                                                                            "rating": 2480,
                                                                            "progress": 21
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "vaaaaas24",
                                                    "username": "Vaaaaas24",
                                                    "perfs": {
                                                                "antichess": {
                                                                            "rating": 2459,
                                                                            "progress": 3
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "peanutbutter12345",
                                                    "username": "Peanutbutter12345",
                                                    "perfs": {
                                                                "antichess": {
                                                                            "rating": 2430,
                                                                            "progress": 33
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "hidra31",
                                                    "username": "hidra31",
                                                    "perfs": {
                                                                "antichess": {
                                                                            "rating": 2426,
                                                                            "progress": -11
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "grohochetgrom",
                                                    "username": "GrohochetGrom",
                                                    "perfs": {
                                                                "antichess": {
                                                                            "rating": 2423,
                                                                            "progress": 0
                                                                }
                                                    }
                                        }
                            ],
                            "atomic": [
                                        {
                                                    "id": "neverofzero",
                                                    "username": "NeverOFzero",
                                                    "perfs": {
                                                                "atomic": {
                                                                            "rating": 2566,
                                                                            "progress": -11
                                                                }
                                                    },
                                                    "patron": true,
                                                    "online": true
                                        },
                                        {
                                                    "id": "wolfram_ep",
                                                    "username": "Wolfram_EP",
                                                    "perfs": {
                                                                "atomic": {
                                                                            "rating": 2444,
                                                                            "progress": 5
                                                                }
                                                    },
                                                    "patron": true,
                                                    "online": true
                                        },
                                        {
                                                    "id": "chrisrapid",
                                                    "username": "chrisrapid",
                                                    "perfs": {
                                                                "atomic": {
                                                                            "rating": 2430,
                                                                            "progress": 8
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "ihatespammers",
                                                    "username": "ihatespaMMers",
                                                    "perfs": {
                                                                "atomic": {
                                                                            "rating": 2426,
                                                                            "progress": -2
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "vlad_00",
                                                    "username": "vlad_00",
                                                    "perfs": {
                                                                "atomic": {
                                                                            "rating": 2399,
                                                                            "progress": -11
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "sutcunuri",
                                                    "username": "sutcunuri",
                                                    "perfs": {
                                                                "atomic": {
                                                                            "rating": 2381,
                                                                            "progress": 26
                                                                }
                                                    },
                                                    "title": "FM"
                                        },
                                        {
                                                    "id": "opabinia",
                                                    "username": "Opabinia",
                                                    "perfs": {
                                                                "atomic": {
                                                                            "rating": 2366,
                                                                            "progress": 13
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "judebaetorrens",
                                                    "username": "JudeBaeTorrens",
                                                    "perfs": {
                                                                "atomic": {
                                                                            "rating": 2345,
                                                                            "progress": -36
                                                                }
                                                    },
                                                    "patron": true,
                                                    "online": true
                                        },
                                        {
                                                    "id": "grx_bullet",
                                                    "username": "GRX_BULLET",
                                                    "perfs": {
                                                                "atomic": {
                                                                            "rating": 2326,
                                                                            "progress": 9
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "trojanhorse2009",
                                                    "username": "Trojanhorse2009",
                                                    "perfs": {
                                                                "atomic": {
                                                                            "rating": 2324,
                                                                            "progress": 28
                                                                }
                                                    },
                                                    "title": "IM"
                                        }
                            ],
                            "horde": [
                                        {
                                                    "id": "albinsajan",
                                                    "username": "Albinsajan",
                                                    "perfs": {
                                                                "horde": {
                                                                            "rating": 2766,
                                                                            "progress": 3
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "horus_88",
                                                    "username": "Horus_88",
                                                    "perfs": {
                                                                "horde": {
                                                                            "rating": 2758,
                                                                            "progress": 8
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "bijiy",
                                                    "username": "bijiy",
                                                    "perfs": {
                                                                "horde": {
                                                                            "rating": 2707,
                                                                            "progress": -13
                                                                }
                                                    },
                                                    "title": "FM"
                                        },
                                        {
                                                    "id": "kiwitrain",
                                                    "username": "KiwiTrain",
                                                    "perfs": {
                                                                "horde": {
                                                                            "rating": 2669,
                                                                            "progress": -13
                                                                }
                                                    },
                                                    "patron": true
                                        },
                                        {
                                                    "id": "luquihorde08",
                                                    "username": "Luquihorde08",
                                                    "perfs": {
                                                                "horde": {
                                                                            "rating": 2644,
                                                                            "progress": 9
                                                                }
                                                    },
                                                    "patron": true
                                        },
                                        {
                                                    "id": "matvei-e2e4",
                                                    "username": "Matvei-e2e4",
                                                    "perfs": {
                                                                "horde": {
                                                                            "rating": 2628,
                                                                            "progress": -19
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "yakov25",
                                                    "username": "Yakov25",
                                                    "perfs": {
                                                                "horde": {
                                                                            "rating": 2626,
                                                                            "progress": 9
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "matteorf2b",
                                                    "username": "matteorf2b",
                                                    "perfs": {
                                                                "horde": {
                                                                            "rating": 2606,
                                                                            "progress": -3
                                                                }
                                                    },
                                                    "title": "CM"
                                        },
                                        {
                                                    "id": "lion2006-45",
                                                    "username": "lion2006-45",
                                                    "perfs": {
                                                                "horde": {
                                                                            "rating": 2599,
                                                                            "progress": 9
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "aar_77on",
                                                    "username": "Aar_77on",
                                                    "perfs": {
                                                                "horde": {
                                                                            "rating": 2572,
                                                                            "progress": 9
                                                                }
                                                    }
                                        }
                            ],
                            "racingKings": [
                                        {
                                                    "id": "bijiy",
                                                    "username": "bijiy",
                                                    "perfs": {
                                                                "racingKings": {
                                                                            "rating": 2475,
                                                                            "progress": 7
                                                                }
                                                    },
                                                    "title": "FM"
                                        },
                                        {
                                                    "id": "seth_777",
                                                    "username": "seth_777",
                                                    "perfs": {
                                                                "racingKings": {
                                                                            "rating": 2467,
                                                                            "progress": 5
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "nilsewon",
                                                    "username": "NilSeWon",
                                                    "perfs": {
                                                                "racingKings": {
                                                                            "rating": 2465,
                                                                            "progress": 53
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "queeneatingdragon",
                                                    "username": "QueenEatingDragon",
                                                    "perfs": {
                                                                "racingKings": {
                                                                            "rating": 2420,
                                                                            "progress": 5
                                                                }
                                                    },
                                                    "title": "NM"
                                        },
                                        {
                                                    "id": "cybershredder",
                                                    "username": "CyberShredder",
                                                    "perfs": {
                                                                "racingKings": {
                                                                            "rating": 2387,
                                                                            "progress": 8
                                                                }
                                                    },
                                                    "online": true
                                        },
                                        {
                                                    "id": "imakemanymistakes",
                                                    "username": "IMakeManyMistakes",
                                                    "perfs": {
                                                                "racingKings": {
                                                                            "rating": 2353,
                                                                            "progress": -1
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "oscarsm80",
                                                    "username": "OSCARSM80",
                                                    "perfs": {
                                                                "racingKings": {
                                                                            "rating": 2349,
                                                                            "progress": 27
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "chess23456789",
                                                    "username": "CHESS23456789",
                                                    "perfs": {
                                                                "racingKings": {
                                                                            "rating": 2328,
                                                                            "progress": 7
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "lion2006-45",
                                                    "username": "lion2006-45",
                                                    "perfs": {
                                                                "racingKings": {
                                                                            "rating": 2325,
                                                                            "progress": 13
                                                                }
                                                    }
                                        },
                                        {
                                                    "id": "panagiskosmatos",
                                                    "username": "panagiskosmatos",
                                                    "perfs": {
                                                                "racingKings": {
                                                                            "rating": 2321,
                                                                            "progress": 17
                                                                }
                                                    }
                                        }
                            ]
                }
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: GET api/player
                    assertEquals("api/player", request.url.encodedPath.trimStart('/'))
                    assertEquals(HttpMethod.parse("GET"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.player()

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Verify field: bullet
            // Verify field: blitz
            // Verify field: rapid

            // Cleanup
            testApiClient.close()
        }

    @Test
    fun testPlayertopnbperftype() =
        runTest {
            val nb = "mock"
            val perfType = "mock"
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                {
                            "users": [
                                        {
                                                    "id": "ana",
                                                    "username": "Ana",
                                                    "perfs": {
                                                                "blitz": {
                                                                            "rating": 2441,
                                                                            "progress": 0
                                                                }
                                                    },
                                                    "title": "WNM"
                                        },
                                        {
                                                    "id": "angel",
                                                    "username": "Angel",
                                                    "perfs": {
                                                                "blitz": {
                                                                            "rating": 2384,
                                                                            "progress": 0
                                                                }
                                                    },
                                                    "title": "FM",
                                                    "patron": true
                                        },
                                        {
                                                    "id": "elena",
                                                    "username": "Elena",
                                                    "perfs": {
                                                                "blitz": {
                                                                            "rating": 2374,
                                                                            "progress": 0
                                                                }
                                                    },
                                                    "title": "WIM"
                                        }
                            ]
                }
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: GET api/player/top/${nb}/${perfType}
                    assertEquals(HttpMethod.parse("GET"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/vnd.lichess.v3+json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.playerTopNbPerfType(nb = Random.nextInt(), perfType = "mock")

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Verify field: users

            // Cleanup
            testApiClient.close()
        }

    @Test
    fun testUser() =
        runTest {
            val username = "mock"
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                {
                            "id": "thibault",
                            "username": "thibault",
                            "perfs": {
                                        "ultraBullet": {
                                                    "games": 3,
                                                    "rating": 1688,
                                                    "rd": 351,
                                                    "prog": 0,
                                                    "prov": true
                                        },
                                        "bullet": {
                                                    "games": 7475,
                                                    "rating": 1787,
                                                    "rd": 82,
                                                    "prog": -6
                                        },
                                        "blitz": {
                                                    "games": 11537,
                                                    "rating": 1785,
                                                    "rd": 53,
                                                    "prog": 4
                                        },
                                        "rapid": {
                                                    "games": 873,
                                                    "rating": 1746,
                                                    "rd": 134,
                                                    "prog": -71,
                                                    "prov": true
                                        },
                                        "classical": {
                                                    "games": 24,
                                                    "rating": 1806,
                                                    "rd": 247,
                                                    "prog": -5,
                                                    "prov": true
                                        },
                                        "correspondence": {
                                                    "games": 377,
                                                    "rating": 1942,
                                                    "rd": 150,
                                                    "prog": -12,
                                                    "prov": true
                                        },
                                        "chess960": {
                                                    "games": 348,
                                                    "rating": 1551,
                                                    "rd": 255,
                                                    "prog": 61,
                                                    "prov": true
                                        },
                                        "kingOfTheHill": {
                                                    "games": 94,
                                                    "rating": 1744,
                                                    "rd": 276,
                                                    "prog": 14,
                                                    "prov": true
                                        },
                                        "threeCheck": {
                                                    "games": 66,
                                                    "rating": 1728,
                                                    "rd": 248,
                                                    "prog": 132,
                                                    "prov": true
                                        },
                                        "antichess": {
                                                    "games": 72,
                                                    "rating": 1512,
                                                    "rd": 273,
                                                    "prog": -20,
                                                    "prov": true
                                        },
                                        "atomic": {
                                                    "games": 99,
                                                    "rating": 1633,
                                                    "rd": 289,
                                                    "prog": 18,
                                                    "prov": true
                                        },
                                        "horde": {
                                                    "games": 46,
                                                    "rating": 1592,
                                                    "rd": 270,
                                                    "prog": -20,
                                                    "prov": true
                                        },
                                        "racingKings": {
                                                    "games": 13,
                                                    "rating": 1552,
                                                    "rd": 321,
                                                    "prog": -75,
                                                    "prov": true
                                        },
                                        "crazyhouse": {
                                                    "games": 50,
                                                    "rating": 1567,
                                                    "rd": 287,
                                                    "prog": -34,
                                                    "prov": true
                                        },
                                        "puzzle": {
                                                    "games": 5704,
                                                    "rating": 1915,
                                                    "rd": 74,
                                                    "prog": 0
                                        },
                                        "storm": {
                                                    "runs": 44,
                                                    "score": 33
                                        },
                                        "racer": {
                                                    "runs": 82,
                                                    "score": 51
                                        },
                                        "streak": {
                                                    "runs": 49,
                                                    "score": 33
                                        }
                            },
                            "flair": "nature.seedling",
                            "patron": true,
                            "patronColor": 10,
                            "verified": true,
                            "createdAt": 1290415680000,
                            "profile": {
                                        "bio": "I turn coffee into bugs.",
                                        "realName": "Thibault Duplessis",
                                        "links": "github.com/ornicar\r\nmas.to/@thibault"
                            },
                            "seenAt": 1761232630967,
                            "playTime": {
                                        "total": 6437101,
                                        "tv": 17974
                            },
                            "url": "https://lichess.org/@/thibault",
                            "playing": "https://lichess.org/2hkdzX2e/black",
                            "count": {
                                        "all": 23451,
                                        "rated": 21088,
                                        "draw": 1028,
                                        "loss": 11200,
                                        "win": 11218,
                                        "bookmark": 79,
                                        "playing": 3,
                                        "import": 73,
                                        "me": 0
                            },
                            "streamer": {
                                        "twitch": {
                                                    "channel": "https://www.twitch.tv/ornicar2"
                                        }
                            },
                            "followable": true,
                            "following": false,
                            "blocking": false
                }
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: GET api/user/${username}
                    assertEquals("api/user/$username", request.url.encodedPath.trimStart('/'))
                    assertEquals(HttpMethod.parse("GET"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.user(username = "mock")

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Verify field: id
            // Verify field: username
            // Verify field: perfs

            // Cleanup
            testApiClient.close()
        }

    @Test
    fun testUserratinghistory_example0() =
        runTest {
            val username = "mock"
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                [
                            {
                                        "name": "UltraBullet",
                                        "points": []
                            },
                            {
                                        "name": "Bullet",
                                        "points": [
                                                    [
                                                                2025,
                                                                8,
                                                                7,
                                                                728
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                10,
                                                                859
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                13,
                                                                851
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                16,
                                                                1085
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                19,
                                                                1074
                                                    ]
                                        ]
                            },
                            {
                                        "name": "Blitz",
                                        "points": [
                                                    [
                                                                2025,
                                                                8,
                                                                7,
                                                                771
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                10,
                                                                854
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                13,
                                                                937
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                16,
                                                                825
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                19,
                                                                886
                                                    ]
                                        ]
                            },
                            {
                                        "name": "Rapid",
                                        "points": [
                                                    [
                                                                2025,
                                                                8,
                                                                7,
                                                                848
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                10,
                                                                851
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                13,
                                                                919
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                16,
                                                                932
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                19,
                                                                1044
                                                    ]
                                        ]
                            },
                            {
                                        "name": "Classical",
                                        "points": [
                                                    [
                                                                2025,
                                                                8,
                                                                7,
                                                                1020
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                10,
                                                                949
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                13,
                                                                1007
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                16,
                                                                977
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                19,
                                                                1121
                                                    ]
                                        ]
                            },
                            {
                                        "name": "Correspondence",
                                        "points": [
                                                    [
                                                                2025,
                                                                8,
                                                                7,
                                                                1426
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                14,
                                                                1217
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                21,
                                                                1208
                                                    ]
                                        ]
                            },
                            {
                                        "name": "Crazyhouse",
                                        "points": [
                                                    [
                                                                2025,
                                                                8,
                                                                7,
                                                                1461
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                11,
                                                                1247
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                15,
                                                                1175
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                19,
                                                                982
                                                    ]
                                        ]
                            },
                            {
                                        "name": "Chess960",
                                        "points": [
                                                    [
                                                                2025,
                                                                8,
                                                                7,
                                                                733
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                13,
                                                                992
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                19,
                                                                1064
                                                    ]
                                        ]
                            },
                            {
                                        "name": "King of the Hill",
                                        "points": [
                                                    [
                                                                2025,
                                                                8,
                                                                7,
                                                                1415
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                14,
                                                                1264
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                21,
                                                                947
                                                    ]
                                        ]
                            },
                            {
                                        "name": "Three-check",
                                        "points": [
                                                    [
                                                                2025,
                                                                8,
                                                                7,
                                                                1425
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                16,
                                                                1247
                                                    ]
                                        ]
                            },
                            {
                                        "name": "Antichess",
                                        "points": [
                                                    [
                                                                2025,
                                                                8,
                                                                7,
                                                                1400
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                15,
                                                                1199
                                                    ]
                                        ]
                            },
                            {
                                        "name": "Atomic",
                                        "points": [
                                                    [
                                                                2025,
                                                                8,
                                                                7,
                                                                1079
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                15,
                                                                1037
                                                    ]
                                        ]
                            },
                            {
                                        "name": "Horde",
                                        "points": [
                                                    [
                                                                2025,
                                                                8,
                                                                7,
                                                                767
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                10,
                                                                926
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                13,
                                                                990
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                16,
                                                                980
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                19,
                                                                1081
                                                    ]
                                        ]
                            },
                            {
                                        "name": "Racing Kings",
                                        "points": []
                            },
                            {
                                        "name": "Puzzles",
                                        "points": [
                                                    [
                                                                2025,
                                                                8,
                                                                7,
                                                                1273
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                9,
                                                                1238
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                11,
                                                                1276
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                13,
                                                                1294
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                15,
                                                                1225
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                17,
                                                                1210
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                19,
                                                                1238
                                                    ],
                                                    [
                                                                2025,
                                                                8,
                                                                21,
                                                                1180
                                                    ]
                                        ]
                            }
                ]
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: GET api/user/${username}/rating-history
                    assertEquals("api/user/$username/rating-history", request.url.encodedPath.trimStart('/'))
                    assertEquals(HttpMethod.parse("GET"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.userRatingHistory(username = "mock")

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Add specific field assertions here

            // Cleanup
            testApiClient.close()
        }

    @Test
    fun testUserratinghistory_example1() =
        runTest {
            val username = "mock"
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                [
                            {
                                        "name": "Bullet",
                                        "points": [
                                                    [
                                                                2011,
                                                                0,
                                                                8,
                                                                1472
                                                    ],
                                                    [
                                                                2011,
                                                                0,
                                                                9,
                                                                1332
                                                    ],
                                                    [
                                                                2011,
                                                                8,
                                                                12,
                                                                1314
                                                    ]
                                        ]
                            },
                            {
                                        "name": "Blitz",
                                        "points": [
                                                    [
                                                                2011,
                                                                7,
                                                                29,
                                                                1332
                                                    ]
                                        ]
                            }
                ]
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: GET api/user/${username}/rating-history
                    assertEquals("api/user/$username/rating-history", request.url.encodedPath.trimStart('/'))
                    assertEquals(HttpMethod.parse("GET"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.userRatingHistory(username = "mock")

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Add specific field assertions here

            // Cleanup
            testApiClient.close()
        }

    @Test
    fun testUserperf() =
        runTest {
            val username = "mock"
            val perf = "mock"
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                {
                            "user": {
                                        "name": "thibault"
                            },
                            "perf": {
                                        "glicko": {
                                                    "rating": 1785.99,
                                                    "deviation": 53.67
                                        },
                                        "nb": 11537,
                                        "progress": 4
                            },
                            "rank": null,
                            "percentile": 75.1,
                            "stat": {
                                        "highest": {
                                                    "int": 1970,
                                                    "at": "2022-02-23T13:44:54.633Z",
                                                    "gameId": "Blpjmhnf"
                                        },
                                        "lowest": {
                                                    "int": 1385,
                                                    "at": "2015-08-05T10:13:41.326Z",
                                                    "gameId": "tgbRykg2"
                                        },
                                        "bestWins": {
                                                    "results": [
                                                                {
                                                                            "opRating": 2239,
                                                                            "opId": {
                                                                                        "id": "aqua21",
                                                                                        "name": "aqua21"
                                                                            },
                                                                            "at": "2020-02-15T19:13:05.329Z",
                                                                            "gameId": "UxNJmMXz"
                                                                },
                                                                {
                                                                            "opRating": 2163,
                                                                            "opId": {
                                                                                        "id": "staffan67",
                                                                                        "name": "Staffan67"
                                                                            },
                                                                            "at": "2022-12-28T10:54:21.597Z",
                                                                            "gameId": "9IMlwEv1"
                                                                },
                                                                {
                                                                            "opRating": 2120,
                                                                            "opId": {
                                                                                        "id": "heissenberger",
                                                                                        "name": "Heissenberger"
                                                                            },
                                                                            "at": "2021-10-25T08:26:27.155Z",
                                                                            "gameId": "2buPRuV8"
                                                                },
                                                                {
                                                                            "opRating": 2051,
                                                                            "opId": {
                                                                                        "id": "stas235",
                                                                                        "name": "Stas235"
                                                                            },
                                                                            "at": "2021-11-06T18:55:53.728Z",
                                                                            "gameId": "VLxCVzDY"
                                                                },
                                                                {
                                                                            "opRating": 2040,
                                                                            "opId": {
                                                                                        "id": "harryz-77",
                                                                                        "name": "Harryz-77"
                                                                            },
                                                                            "at": "2021-11-03T17:39:40.181Z",
                                                                            "gameId": "eCgiYDS7"
                                                                }
                                                    ]
                                        },
                                        "worstLosses": {
                                                    "results": [
                                                                {
                                                                            "opRating": 995,
                                                                            "opId": {
                                                                                        "id": "dahupetitjoueur",
                                                                                        "name": "dahupetitjoueur"
                                                                            },
                                                                            "at": "2017-04-12T14:31:58.002Z",
                                                                            "gameId": "7zyddy2c"
                                                                },
                                                                {
                                                                            "opRating": 1121,
                                                                            "opId": {
                                                                                        "id": "tinkugupta1011",
                                                                                        "name": "Tinkugupta1011"
                                                                            },
                                                                            "at": "2022-10-22T03:36:35.447Z",
                                                                            "gameId": "CCyyGKmD"
                                                                },
                                                                {
                                                                            "opRating": 1146,
                                                                            "opId": {
                                                                                        "id": "chemkhihabib",
                                                                                        "name": "chemkhihabib"
                                                                            },
                                                                            "at": "2016-06-01T09:31:09.694Z",
                                                                            "gameId": "XatMm3RO"
                                                                },
                                                                {
                                                                            "opRating": 1166,
                                                                            "opId": {
                                                                                        "id": "bottios",
                                                                                        "name": "Bottios",
                                                                                        "title": "BOT"
                                                                            },
                                                                            "at": "2018-12-14T09:22:52.633Z",
                                                                            "gameId": "3fke4MHX"
                                                                },
                                                                {
                                                                            "opRating": 1182,
                                                                            "opId": {
                                                                                        "id": "skanerterry",
                                                                                        "name": "skanerterry"
                                                                            },
                                                                            "at": "2016-06-09T15:32:10.474Z",
                                                                            "gameId": "n4ViqGlp"
                                                                }
                                                    ]
                                        },
                                        "count": {
                                                    "all": 12021,
                                                    "rated": 11415,
                                                    "win": 5689,
                                                    "loss": 5763,
                                                    "draw": 569,
                                                    "tour": 1587,
                                                    "berserk": 49,
                                                    "opAvg": 1706.12,
                                                    "seconds": 3733379,
                                                    "disconnects": 9
                                        },
                                        "resultStreak": {
                                                    "win": {
                                                                "cur": {
                                                                            "v": 2,
                                                                            "from": {
                                                                                        "at": "2025-09-18T15:31:58.854Z",
                                                                                        "gameId": "gnjoI7dm"
                                                                            },
                                                                            "to": {
                                                                                        "at": "2025-10-13T16:31:59.436Z",
                                                                                        "gameId": "7WEM2Hc4"
                                                                            }
                                                                },
                                                                "max": {
                                                                            "v": 11,
                                                                            "from": {
                                                                                        "at": "2018-10-19T10:02:05.144Z",
                                                                                        "gameId": "ycmyqK6e"
                                                                            },
                                                                            "to": {
                                                                                        "at": "2018-10-19T12:25:31.868Z",
                                                                                        "gameId": "3PwQXIBN"
                                                                            }
                                                                }
                                                    },
                                                    "loss": {
                                                                "cur": {
                                                                            "v": 0
                                                                },
                                                                "max": {
                                                                            "v": 19,
                                                                            "from": {
                                                                                        "at": "2018-03-09T23:54:54.771Z",
                                                                                        "gameId": "iAJe1M8f"
                                                                            },
                                                                            "to": {
                                                                                        "at": "2018-03-16T20:52:03.611Z",
                                                                                        "gameId": "7CZ1SEF5"
                                                                            }
                                                                }
                                                    }
                                        },
                                        "playStreak": {
                                                    "nb": {
                                                                "cur": {
                                                                            "v": 0
                                                                },
                                                                "max": {
                                                                            "v": 115,
                                                                            "from": {
                                                                                        "at": "2024-10-18T11:32:12.142Z",
                                                                                        "gameId": "l819pRNp"
                                                                            },
                                                                            "to": {
                                                                                        "at": "2024-10-18T20:54:30.256Z",
                                                                                        "gameId": "1HeDeGbe"
                                                                            }
                                                                }
                                                    },
                                                    "time": {
                                                                "cur": {
                                                                            "v": 0
                                                                },
                                                                "max": {
                                                                            "v": 23231,
                                                                            "from": {
                                                                                        "at": "2024-10-18T11:32:12.142Z",
                                                                                        "gameId": "l819pRNp"
                                                                            },
                                                                            "to": {
                                                                                        "at": "2024-10-18T20:54:30.256Z",
                                                                                        "gameId": "1HeDeGbe"
                                                                            }
                                                                }
                                                    },
                                                    "lastDate": "2025-10-13T16:31:59.436Z"
                                        }
                            }
                }
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: GET api/user/${username}/perf/${perf}
                    assertEquals("api/user/$username/perf/$perf", request.url.encodedPath.trimStart('/'))
                    assertEquals(HttpMethod.parse("GET"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.userPerf(username = "mock", perf = "mock")

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Verify field: user
            // Verify field: perf
            // Verify field: rank

            // Cleanup
            testApiClient.close()
        }

    @Test
    fun testUseractivity() =
        runTest {
            val username = "mock"
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                [
                            {
                                        "interval": {
                                                    "start": 1758585600000,
                                                    "end": 1758672000000
                                        },
                                        "racer": {
                                                    "runs": 1,
                                                    "score": 28
                                        },
                                        "follows": {
                                                    "in": {
                                                                "ids": [
                                                                            "tripitz",
                                                                            "yan-g",
                                                                            "hanter_2011",
                                                                            "super-super",
                                                                            "gameswinger",
                                                                            "casknk",
                                                                            "kkaleks",
                                                                            "bigotelo",
                                                                            "ze_0122",
                                                                            "vihaan-ottters",
                                                                            "chesscanada55"
                                                                ]
                                                    }
                                        }
                            },
                            {
                                        "interval": {
                                                    "start": 1758499200000,
                                                    "end": 1758585600000
                                        },
                                        "follows": {
                                                    "in": {
                                                                "ids": [
                                                                            "wisebarkingkangaroo",
                                                                            "thenytefury",
                                                                            "meetsatyadev",
                                                                            "akira_s24",
                                                                            "taeseong17",
                                                                            "shawnthenoob",
                                                                            "leosmmr",
                                                                            "vancesterling",
                                                                            "oliver_285",
                                                                            "pehchana_kaunn",
                                                                            "wolfsbane",
                                                                            "blunderproofwin",
                                                                            "schachhorizont_de"
                                                                ]
                                                    }
                                        },
                                        "posts": [
                                                    {
                                                                "topicUrl": "/forum/lichess-feedback/when-entering-games-via-url-from-chessgamescom-in-study-it-just-gives-an-empty-chapter",
                                                                "topicName": "When entering games via URL from chessgames.com in study it just gives an empty chapter",
                                                                "posts": [
                                                                            {
                                                                                        "url": "/forum/redirect/post/gVV5zSid",
                                                                                        "text": "I looked it up. It's chessgames.com that explicitely forbids it. They worked on making it impossible to export the PGN to another server such as lichess.\r\n\r\nThis is therefore out of my hands. I recommend you send them an email asking for a solution."
                                                                            }
                                                                ]
                                                    }
                                        ]
                            },
                            {
                                        "interval": {
                                                    "start": 1758412800000,
                                                    "end": 1758499200000
                                        },
                                        "follows": {
                                                    "in": {
                                                                "ids": [
                                                                            "esabisa",
                                                                            "lucasz05",
                                                                            "rvihaan",
                                                                            "chess_time_sr",
                                                                            "amethistos",
                                                                            "fa_had",
                                                                            "mr9goals",
                                                                            "armerul9",
                                                                            "adr3v",
                                                                            "chessplayer_0604",
                                                                            "chezzspieler",
                                                                            "lordmannyjinx2",
                                                                            "maggieratson2382",
                                                                            "kimsaro",
                                                                            "just3elax"
                                                                ]
                                                    }
                                        }
                            },
                            {
                                        "interval": {
                                                    "start": 1758326400000,
                                                    "end": 1758412800000
                                        },
                                        "follows": {
                                                    "in": {
                                                                "ids": [
                                                                            "aymanma8",
                                                                            "red_spear",
                                                                            "hannah_zoe",
                                                                            "verymotorox",
                                                                            "gabrielbekauri2016",
                                                                            "ak47gamer",
                                                                            "i_am_clancy",
                                                                            "seniorjriii",
                                                                            "shasswath1",
                                                                            "angraj_karn",
                                                                            "alicedorarozenfeld",
                                                                            "ghooo",
                                                                            "alextece",
                                                                            "illaga_2",
                                                                            "richniftyrabbit"
                                                                ],
                                                                "nb": 18
                                                    }
                                        }
                            },
                            {
                                        "interval": {
                                                    "start": 1758240000000,
                                                    "end": 1758326400000
                                        },
                                        "games": {
                                                    "bullet": {
                                                                "win": 2,
                                                                "loss": 0,
                                                                "draw": 0,
                                                                "rp": {
                                                                            "before": 1767,
                                                                            "after": 1787
                                                                }
                                                    }
                                        },
                                        "follows": {
                                                    "in": {
                                                                "ids": [
                                                                            "luis_andre2",
                                                                            "dswift1_makar-1",
                                                                            "faizan_ccs",
                                                                            "sukiwks",
                                                                            "falcon_fast",
                                                                            "divyanka2015",
                                                                            "putneypawn68",
                                                                            "tanjiro101314",
                                                                            "kodster42015",
                                                                            "alphatse",
                                                                            "geniusgennadios",
                                                                            "level1slime",
                                                                            "viyaan0714"
                                                                ]
                                                    }
                                        },
                                        "posts": [
                                                    {
                                                                "topicUrl": "/forum/lichess-feedback/cant-create-new-game-3",
                                                                "topicName": "Can't create \"new game\"",
                                                                "posts": [
                                                                            {
                                                                                        "url": "/forum/redirect/post/X1BBn8HN",
                                                                                        "text": "It's the same thing. Click that button."
                                                                            }
                                                                ]
                                                    },
                                                    {
                                                                "topicUrl": "/forum/lichess-feedback/when-entering-games-via-url-from-chessgamescom-in-study-it-just-gives-an-empty-chapter",
                                                                "topicName": "When entering games via URL from chessgames.com in study it just gives an empty chapter",
                                                                "posts": [
                                                                            {
                                                                                        "url": "/forum/redirect/post/kj2bw6RL",
                                                                                        "text": "Please paste here the exact chessgames.com URL so I can try it out and reproduce the issue."
                                                                            }
                                                                ]
                                                    }
                                        ]
                            },
                            {
                                        "interval": {
                                                    "start": 1758153600000,
                                                    "end": 1758240000000
                                        },
                                        "games": {
                                                    "blitz": {
                                                                "win": 1,
                                                                "loss": 0,
                                                                "draw": 0,
                                                                "rp": {
                                                                            "before": 1772,
                                                                            "after": 1778
                                                                }
                                                    }
                                        },
                                        "puzzles": {
                                                    "score": {
                                                                "win": 1,
                                                                "loss": 0,
                                                                "draw": 0,
                                                                "rp": {
                                                                            "before": 1940,
                                                                            "after": 1954
                                                                }
                                                    }
                                        },
                                        "follows": {
                                                    "in": {
                                                                "ids": [
                                                                            "privatechessplayer44",
                                                                            "manolete000",
                                                                            "aadhirananandkumar",
                                                                            "kondratevalyudmila",
                                                                            "sreedev19",
                                                                            "nguyenquangvoan2014",
                                                                            "axolotlserz",
                                                                            "dohluc",
                                                                            "messi95",
                                                                            "the_berserk_account",
                                                                            "kavinthegoatcricket"
                                                                ]
                                                    }
                                        }
                            },
                            {
                                        "interval": {
                                                    "start": 1758067200000,
                                                    "end": 1758153600000
                                        },
                                        "puzzles": {
                                                    "score": {
                                                                "win": 2,
                                                                "loss": 0,
                                                                "draw": 0,
                                                                "rp": {
                                                                            "before": 1912,
                                                                            "after": 1940
                                                                }
                                                    }
                                        },
                                        "follows": {
                                                    "in": {
                                                                "ids": [
                                                                            "ajq64",
                                                                            "magnum_carlsen09",
                                                                            "mg_votte",
                                                                            "oregolagantse09",
                                                                            "zeydex11",
                                                                            "fox2024",
                                                                            "ved_2013",
                                                                            "gchen44",
                                                                            "pabloboris",
                                                                            "bababoing"
                                                                ]
                                                    }
                                        },
                                        "posts": [
                                                    {
                                                                "topicUrl": "/forum/diagnostic/arndti-problem-report",
                                                                "topicName": "Arndti problem report",
                                                                "posts": [
                                                                            {
                                                                                        "url": "/forum/redirect/post/00tKyQ47",
                                                                                        "text": "Thanks @Arndti that's helpful.\r\n\r\nIs it working better now? If not, could you try clearing your browser cache and see if that helps? Like this: https://support.mozilla.org/en-US/kb/how-clear-firefox-cache"
                                                                            }
                                                                ]
                                                    },
                                                    {
                                                                "topicUrl": "/forum/lichess-feedback/invisible-rooks-and-knights-on-firefox",
                                                                "topicName": "Invisible rooks and knights on Firefox?",
                                                                "posts": [
                                                                            {
                                                                                        "url": "/forum/redirect/post/o2CwTagW",
                                                                                        "text": "Thank you all, that's very helpful. I'm on it."
                                                                            }
                                                                ]
                                                    }
                                        ]
                            }
                ]
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: GET api/user/${username}/activity
                    assertEquals("api/user/$username/activity", request.url.encodedPath.trimStart('/'))
                    assertEquals(HttpMethod.parse("GET"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.userActivity(username = "mock")

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Add specific field assertions here

            // Cleanup
            testApiClient.close()
        }

    @Test
    fun testUsers() =
        runTest {
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                [
                            {
                                        "id": "thibault",
                                        "username": "thibault",
                                        "perfs": {
                                                    "ultraBullet": {
                                                                "games": 3,
                                                                "rating": 1688,
                                                                "rd": 350,
                                                                "prog": 0,
                                                                "prov": true
                                                    },
                                                    "bullet": {
                                                                "games": 7475,
                                                                "rating": 1787,
                                                                "rd": 78,
                                                                "prog": -6
                                                    },
                                                    "blitz": {
                                                                "games": 11536,
                                                                "rating": 1778,
                                                                "rd": 47,
                                                                "prog": 3
                                                    },
                                                    "rapid": {
                                                                "games": 873,
                                                                "rating": 1746,
                                                                "rd": 131,
                                                                "prog": -71,
                                                                "prov": true
                                                    },
                                                    "classical": {
                                                                "games": 24,
                                                                "rating": 1806,
                                                                "rd": 246,
                                                                "prog": -5,
                                                                "prov": true
                                                    },
                                                    "correspondence": {
                                                                "games": 377,
                                                                "rating": 1942,
                                                                "rd": 148,
                                                                "prog": -12,
                                                                "prov": true
                                                    },
                                                    "chess960": {
                                                                "games": 348,
                                                                "rating": 1551,
                                                                "rd": 254,
                                                                "prog": 61,
                                                                "prov": true
                                                    },
                                                    "kingOfTheHill": {
                                                                "games": 94,
                                                                "rating": 1744,
                                                                "rd": 275,
                                                                "prog": 14,
                                                                "prov": true
                                                    },
                                                    "threeCheck": {
                                                                "games": 66,
                                                                "rating": 1728,
                                                                "rd": 246,
                                                                "prog": 132,
                                                                "prov": true
                                                    },
                                                    "antichess": {
                                                                "games": 72,
                                                                "rating": 1512,
                                                                "rd": 272,
                                                                "prog": -20,
                                                                "prov": true
                                                    },
                                                    "atomic": {
                                                                "games": 99,
                                                                "rating": 1633,
                                                                "rd": 288,
                                                                "prog": 18,
                                                                "prov": true
                                                    },
                                                    "horde": {
                                                                "games": 46,
                                                                "rating": 1592,
                                                                "rd": 268,
                                                                "prog": -20,
                                                                "prov": true
                                                    },
                                                    "racingKings": {
                                                                "games": 13,
                                                                "rating": 1552,
                                                                "rd": 320,
                                                                "prog": -75,
                                                                "prov": true
                                                    },
                                                    "crazyhouse": {
                                                                "games": 50,
                                                                "rating": 1567,
                                                                "rd": 286,
                                                                "prog": -34,
                                                                "prov": true
                                                    },
                                                    "puzzle": {
                                                                "games": 5696,
                                                                "rating": 1954,
                                                                "rd": 71,
                                                                "prog": 0
                                                    },
                                                    "storm": {
                                                                "runs": 44,
                                                                "score": 33
                                                    },
                                                    "racer": {
                                                                "runs": 82,
                                                                "score": 51
                                                    },
                                                    "streak": {
                                                                "runs": 49,
                                                                "score": 33
                                                    }
                                        },
                                        "flair": "nature.seedling",
                                        "patron": true,
                                        "patronColor": 9,
                                        "verified": true,
                                        "createdAt": 1290415680000,
                                        "profile": {
                                                    "bio": "I turn coffee into bugs.",
                                                    "realName": "Thibault Duplessis",
                                                    "links": "github.com/ornicar\r\nmas.to/@thibault"
                                        },
                                        "seenAt": 1758635849909,
                                        "playTime": {
                                                    "total": 6436845,
                                                    "tv": 17974
                                        }
                            },
                            {
                                        "id": "maia1",
                                        "username": "maia1",
                                        "perfs": {
                                                    "bullet": {
                                                                "games": 193064,
                                                                "rating": 1512,
                                                                "rd": 45,
                                                                "prog": 17
                                                    },
                                                    "blitz": {
                                                                "games": 357366,
                                                                "rating": 1412,
                                                                "rd": 45,
                                                                "prog": -12
                                                    },
                                                    "rapid": {
                                                                "games": 408246,
                                                                "rating": 1590,
                                                                "rd": 45,
                                                                "prog": -25
                                                    },
                                                    "classical": {
                                                                "games": 118909,
                                                                "rating": 1626,
                                                                "rd": 45,
                                                                "prog": 10
                                                    },
                                                    "correspondence": {
                                                                "games": 265,
                                                                "rating": 1527,
                                                                "rd": 206,
                                                                "prog": -18,
                                                                "prov": true
                                                    }
                                        },
                                        "title": "BOT",
                                        "verified": true,
                                        "createdAt": 1582579972726,
                                        "profile": {
                                                    "bio": "Maia is a human-like neural network chess engine. This version was trained by learning from over 10 million Lichess games between 1100s. \r\n\r\nMaia Chess is an ongoing research project aiming to make a more human-friendly, useful, and fun chess AI. For more information go to maiachess.com. You can also play against @maia5 and @maia9. Developed by\u00a0@ashtonanderson, @sidsen\u00a0and\u00a0@reidmcy.",
                                                    "realName": "Maia Chess 1100",
                                                    "links": "https://maiachess.com\r\nhttps://github.com/CSSLab/maia-chess\r\nhttps://twitter.com/maiachess"
                                        },
                                        "seenAt": 1758635494337,
                                        "playTime": {
                                                    "total": 1083092110,
                                                    "tv": 3019408
                                        }
                            },
                            {
                                        "id": "maia5",
                                        "username": "maia5",
                                        "perfs": {
                                                    "bullet": {
                                                                "games": 59096,
                                                                "rating": 1569,
                                                                "rd": 45,
                                                                "prog": 17
                                                    },
                                                    "blitz": {
                                                                "games": 161720,
                                                                "rating": 1485,
                                                                "rd": 45,
                                                                "prog": -7
                                                    },
                                                    "rapid": {
                                                                "games": 176792,
                                                                "rating": 1640,
                                                                "rd": 45,
                                                                "prog": -14
                                                    },
                                                    "classical": {
                                                                "games": 43066,
                                                                "rating": 1621,
                                                                "rd": 45,
                                                                "prog": 8
                                                    },
                                                    "correspondence": {
                                                                "games": 18,
                                                                "rating": 1792,
                                                                "rd": 228,
                                                                "prog": 30,
                                                                "prov": true
                                                    }
                                        },
                                        "title": "BOT",
                                        "verified": true,
                                        "createdAt": 1582580198358,
                                        "profile": {
                                                    "bio": "Maia is a human-like neural network chess engine. This version was trained by learning from over 10 million Lichess games between 1500s. Maia Chess is an ongoing research project aiming to make a more human-friendly, useful, and fun chess AI. For more information go to maiachess.com. You can also play @maia1 and @maia9. Developed by @ashtonanderson,  @sidsen and @reidmcy.",
                                                    "realName": "Maia Chess 1500",
                                                    "links": "https://maiachess.com\r\ngithub.com/CSSLab/maia-chess\r\nhttps://twitter.com/maiachess"
                                        },
                                        "seenAt": 1758635443518,
                                        "playTime": {
                                                    "total": 508638915,
                                                    "tv": 3849828
                                        }
                            }
                ]
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: POST api/users
                    assertEquals("api/users", request.url.encodedPath.trimStart('/'))
                    assertEquals(HttpMethod.parse("POST"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.users(body = "mock")

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Add specific field assertions here

            // Cleanup
            testApiClient.close()
        }

    @Test
    fun testStreamerlive() =
        runTest {
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                [
                            {
                                        "name": "Art-Vega",
                                        "title": "CM",
                                        "patron": true,
                                        "patronColor": 10,
                                        "id": "art-vega",
                                        "stream": {
                                                    "service": "twitch",
                                                    "status": "The Mustache Show (Training stream) - lichess.org",
                                                    "lang": "en"
                                        },
                                        "streamer": {
                                                    "name": "Art-Vega",
                                                    "headline": "Game play combined with Chess education and learning.",
                                                    "twitch": "https://www.twitch.tv/art_vega1983",
                                                    "youTube": "https://www.youtube.com/channel/UCcdWYFMXmjIrUsbXSOUo5FQ/live",
                                                    "image": "https://image.lichess1.org/display?fmt=webp&h=350&op=thumbnail&path=art-vega:streamer:art-vega:2IYoARRQ.jpg&w=350&sig=814dee1d132d94a6f488b5eb3b3354cc5ac834bd"
                                        }
                            },
                            {
                                        "name": "ElyneLee",
                                        "patron": true,
                                        "patronColor": 10,
                                        "id": "elynelee",
                                        "stream": {
                                                    "service": "twitch",
                                                    "status": "Day 4 Subathon | RACERRRRRRRRRRR| lichess.org",
                                                    "lang": "en"
                                        },
                                        "streamer": {
                                                    "name": "ElyneLee",
                                                    "headline": "CHESS + MUSIC STREAM EVERYDAY ",
                                                    "description": "hi there! i do chess + music(metal) stream everyday on Twitch. Come hangout with me in chat and have fun together ",
                                                    "twitch": "https://www.twitch.tv/elynelee",
                                                    "youTube": "https://www.youtube.com/channel/UCxigACw3ehZU2UTrfK-FYtA/live",
                                                    "image": "https://image.lichess1.org/display?fmt=webp&h=350&op=thumbnail&path=elynelee:streamer:elynelee:2aAvyqcR.jpg&w=350&sig=5b90229c9f61d8bcb2f2f35648314d94618d33be"
                                        }
                            },
                            {
                                        "name": "acidgambit",
                                        "id": "acidgambit",
                                        "stream": {
                                                    "service": "twitch",
                                                    "status": "MORNING COFFEE (spiked) lichess.org",
                                                    "lang": "en"
                                        },
                                        "streamer": {
                                                    "name": "TommyFOOKINShelby",
                                                    "headline": "Bad Chess. So Bad.",
                                                    "description": "Oh God I'm Bad. So Bad. The Worst. None Worser. Please Help Me. Help.  ",
                                                    "twitch": "https://www.twitch.tv/tommyfookinshelby",
                                                    "image": "https://image.lichess1.org/display?fmt=webp&h=350&op=thumbnail&path=acidgambit:streamer:acidgambit:C9ZM8jyf.jpg&w=350&sig=74e12dbf6b002f34729b7ca6dddb894ee04c93e9"
                                        }
                            },
                            {
                                        "name": "Zug-Zwang-Zebra",
                                        "flair": "nature.zebra",
                                        "id": "zug-zwang-zebra",
                                        "stream": {
                                                    "service": "twitch",
                                                    "status": "\ud83e\udd93\u265f\ufe0fRoad to 1500! Schaffen wir heute die 200 Follows voll?! Ballert mit mir ein bisschen dieses Schach auf Lichess.org!\ud83e\udd93\u265f",
                                                    "lang": "de"
                                        },
                                        "streamer": {
                                                    "name": "Zug-Zwang-Zebra",
                                                    "headline": "Road to 1500 auf Lichess.org",
                                                    "description": "Ich k\u00e4mpfe gerade um die 1500 :)",
                                                    "twitch": "https://www.twitch.tv/ZugZwangZebra",
                                                    "youTube": "https://www.youtube.com/channel/UCWp_1jTkZTWbEjxknk3JOWA/live",
                                                    "image": "https://image.lichess1.org/display?fmt=png&h=350&op=thumbnail&path=streamer:zug-zwang-zebra:mUPwsbSp.png&w=350&sig=660195373368210c769fe738b713c591e51546e0"
                                        }
                            },
                            {
                                        "name": "sadisticTushi",
                                        "flair": "food-drink.french-fries",
                                        "patron": true,
                                        "patronColor": 10,
                                        "id": "sadistictushi",
                                        "stream": {
                                                    "service": "youTube",
                                                    "status": "600 ELO Chess on lichess.org",
                                                    "lang": "en-US"
                                        },
                                        "streamer": {
                                                    "name": "SadisticTushi",
                                                    "headline": "Beating GM's for FUN",
                                                    "description": "\u2b50\ufe0f Something about ME:\r\n\u27a1\ufe0f 27 yrs from India, now in Hong Kong. \r\n\u27a1\ufe0f Chess Title: Arena Grand Master (AGM)\r\n\u27a1\ufe0f FIDE: 1859 (https://ratings.fide.com/profile/5079128)\r\n\u27a1\ufe0f Lichess: 2461 (https://lichess.org/@/sadisticTushi)\r\n\u27a1\ufe0f Chess.com: 2312 (https://www.chess.com/member/tushar20008)\r\n\r\n\u2764\ufe0f SOCIAL MEDIA \r\n\u27a1\ufe0f TWITTER: https://twitter.com/sadisticTushi\r\n\u27a1\ufe0f INSTAGRAM: https://instagram.com/sadisticTushi\r\n\u27a1\ufe0f DISCORD: https://discord.gg/B7Z3AgQCTY\r\n\r\n\u2b50\ufe0f Wanna Support Me More? Donate Here: https://streamlabs.com/tusharanand/tip",
                                                    "youTube": "https://www.youtube.com/channel/UCNCwk2YndqegSmcMRDoIkdQ/live",
                                                    "image": "https://image.lichess1.org/display?fmt=webp&h=350&op=thumbnail&path=sadistictushi:streamer:sadistictushi:i1LsBVq5.jpg&w=350&sig=8fcbfff8491ae789668167282ba9019bc1d6de32"
                                        }
                            }
                ]
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: GET api/streamer/live
                    assertEquals("api/streamer/live", request.url.encodedPath.trimStart('/'))
                    assertEquals(HttpMethod.parse("GET"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.streamerLive()

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Add specific field assertions here

            // Cleanup
            testApiClient.close()
        }

    @Test
    fun testCrosstable_example0() =
        runTest {
            val user1 = "mock"
            val user2 = "mock"
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                {
                            "users": {
                                        "drnykterstein": 753.5,
                                        "rebeccaharris": 459.5
                            },
                            "nbGames": 1213
                }
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: GET api/crosstable/${user1}/${user2}
                    assertEquals("api/crosstable/$user1/$user2", request.url.encodedPath.trimStart('/'))
                    assertEquals(HttpMethod.parse("GET"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.crosstable(user1 = "mock", user2 = "mock")

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Verify field: users
            // Verify field: nbGames

            // Cleanup
            testApiClient.close()
        }

    @Test
    fun testCrosstable_example1() =
        runTest {
            val user1 = "mock"
            val user2 = "mock"
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                {
                            "users": {
                                        "neio": 201.5,
                                        "thibault": 144.5
                            },
                            "nbGames": 346
                }
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: GET api/crosstable/${user1}/${user2}
                    assertEquals("api/crosstable/$user1/$user2", request.url.encodedPath.trimStart('/'))
                    assertEquals(HttpMethod.parse("GET"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.crosstable(user1 = "mock", user2 = "mock")

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Verify field: users
            // Verify field: nbGames

            // Cleanup
            testApiClient.close()
        }

    @Test
    fun testPlayerautocompleteNotImplemented() {
        // TODO: No examples found in OpenAPI spec for this endpoint
        // Endpoint: GET api/player/autocomplete
        // Service method: UsersService.playerAutocomplete()
        // This test is skipped until examples are available in the OpenAPI specification
    }

    @Test
    fun testWritenote() =
        runTest {
            val username = "mock"
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                {
                            "ok": true
                }
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: POST api/user/${username}/note
                    assertEquals("api/user/$username/note", request.url.encodedPath.trimStart('/'))
                    assertEquals(HttpMethod.parse("POST"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.writeNote(username = "mock", text = "mock")

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Verify field: ok

            // Cleanup
            testApiClient.close()
        }

    @Test
    fun testReadnote() =
        runTest {
            val username = "mock"
            // Arrange - Mock HTTP response
            val mockResponse =
                """
                [
                            {
                                        "from": {
                                                    "name": "Bobby",
                                                    "patron": true,
                                                    "patronColor": 1,
                                                    "id": "bobby"
                                        },
                                        "to": {
                                                    "name": "Mary",
                                                    "id": "mary"
                                        },
                                        "text": "this is a private note",
                                        "date": 1758636943174
                            }
                ]
                """.trimIndent()

            val mockEngine =
                MockEngine { request ->
                    // Verify request matches expected endpoint: GET api/user/${username}/note
                    assertEquals("api/user/$username/note", request.url.encodedPath.trimStart('/'))
                    assertEquals(HttpMethod.parse("GET"), request.method)

                    respond(
                        content = ByteReadChannel(mockResponse),
                        status = HttpStatusCode.fromValue(200),
                        headers = headersOf(HttpHeaders.ContentType, "application/json"),
                    )
                }

            // Create mock HttpClient with proper configuration
            val mockHttpClient =
                HttpClient(mockEngine) {
                    install(ContentNegotiation) {
                        json(
                            Json {
                                ignoreUnknownKeys = true
                                coerceInputValues = true
                                explicitNulls = false
                            },
                        )
                    }
                }

            // Create service with mocked client
            val testApiClient =
                BaseApiClient(
                    ctx =
                        ApiContext(
                            baseUrl = "https://lichess.org",
                            httpClient = mockHttpClient,
                            authProvider = NoAuthProvider(),
                        ),
                )
            val testService = UsersService(testApiClient)

            // Act
            val result = testService.readNote(username = "mock")

            // Assert
            assertTrue(result.isSuccess, "API call should succeed")

            // Add specific field assertions here

            // Cleanup
            testApiClient.close()
        }
}
